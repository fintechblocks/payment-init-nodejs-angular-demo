<mat-card>
  <mat-accordion>
    <mat-expansion-panel [expanded]="consent_id ? true :false" id="batch-international-payment-consent-accordion">
      <mat-expansion-panel-header>
        <mat-panel-title>
          Batch International Payment Consent
        </mat-panel-title>
      </mat-expansion-panel-header>
      <mat-accordion>
        <mat-expansion-panel class="nested-accordion create" id="create-batch-international-payment-consent-accordion">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Create Batch International Payment Consent
            </mat-panel-title>
          </mat-expansion-panel-header>
          <mat-accordion>
            <mat-expansion-panel id="batch-international-payment-consent-add-international-payments-accordion">
              <div class="add-batch-payment-div">
                <i class="material-icons blue" (click)="addInternationalPaymentToArray()">
                  add_box
                </i>
              </div>
              <mat-expansion-panel-header>
                <mat-panel-title>Add International Payments</mat-panel-title>
              </mat-expansion-panel-header>
              <mat-accordion>
                <mat-expansion-panel
                  *ngFor="let internationalPayment of internationalPayments.controls; let internationalPaymentConsentFormIndex = index;"
                  [id]="'batch-international-payment-consent-international-payment-'+internationalPaymentConsentFormIndex">
                  <mat-expansion-panel-header>
                    <mat-panel-title>{{internationalPaymentConsentFormIndex+1}}. International Payment</mat-panel-title>
                    <mat-panel-description>
                      <i *ngIf="internationalPayments.controls.length>1"
                      class="material-icons blue mat-expansion-panel-header-description"
                        (click)="deleteInternationalPaymentFromArray(internationalPaymentConsentFormIndex)">
                        delete
                      </i>
                    </mat-panel-description>
                  </mat-expansion-panel-header>
                  <form class="form-group" [formGroup]="internationalPaymentForm">
                    <div formArrayName="internationalPayments">
                      <div [formGroupName]="internationalPaymentConsentFormIndex">
                        <h4>{{internationalPaymentConsentFormIndex+1}}. International Payment</h4>
                        <h5>Instructed amount</h5>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text" [id]="'create-batch-international-payment-consent-amount-'+internationalPaymentConsentFormIndex"
                            class="form-control" formControlName="instructedAmount" placeholder="Instructed amount">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text" [id]="'create-batch-international-payment-consent-currency-'+internationalPaymentConsentFormIndex"
                            class="form-control" formControlName="instructedAmountCurrency"
                            placeholder="Instructed amount currency">
                        </mat-form-field>
                        <h5>Creditor account</h5>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-payment-consent-creditorAccountIdentification-'+internationalPaymentConsentFormIndex"
                            class="form-control" formControlName="creditorAccountIdentification"
                            placeholder="Creditor account identification">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text" [id]="'create-batch-international-payment-consent-name-'+internationalPaymentConsentFormIndex"
                            class="form-control" formControlName="creditorAccountName"
                            placeholder="Creditor account name">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-payment-consent-secondaryIdentification-'+internationalPaymentConsentFormIndex"
                            class="form-control" formControlName="secondaryIdentification"
                            placeholder="Secondary Identification">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-payment-consent-creditorAccountSchemeName-'+internationalPaymentConsentFormIndex"
                            class="form-control" formControlName="creditorAccountSchemeName"
                            placeholder="Creditor account scheme name">
                        </mat-form-field>
                        <h5>Creditor</h5>
                        <mat-form-field>
                          <input matInput type="text" [id]="'create-batch-international-payment-consent-'+internationalPaymentConsentFormIndex+'-creditorName'" class="form-control"
                            formControlName="creditorName"
                            placeholder="Creditor name">
                        </mat-form-field>
                    <div class="create-payment">  
                      <h6>Creditor address line</h6>
                      <i class="material-icons blue bring-forward cursor-pointer" (click)="addAddressLine(internationalPaymentConsentFormIndex)">
                            add_box
                      </i>
                    </div>
                        <div formGroupName="creditorPostalAddress">
                          <div formArrayName="creditorAddressLine">
                            <div *ngFor="let address of internationalPayments.controls[internationalPaymentConsentFormIndex].controls.creditorPostalAddress.controls.creditorAddressLine.controls; let creditorAddressLineIndex = index;">
                              <mat-form-field class="example-full-width">
                                <input matInput
                                  type="text"
                                  [id]="'create-batch-international-payment-consent-'+internationalPaymentConsentFormIndex+'-creditorAddressLine-'+creditorAddressLineIndex"
                                  class="form-control"
                                  [formControlName]="creditorAddressLineIndex"
                                  placeholder="Creditor address line">
                              </mat-form-field>
                            </div>
                          </div>
                        </div>
                      <h5>Creditor agent</h5>
                        <mat-form-field>
                          <input matInput type="text" [id]="'create-batch-international-payment-consent-'+internationalPaymentConsentFormIndex+'-creditorAgentName'" class="form-control"
                            formControlName="creditorAgentName" placeholder="Creditor agent name">
                        </mat-form-field>
                        <mat-form-field>
                          <input matInput type="text" [id]="'create-batch-international-payment-consent-'+internationalPaymentConsentFormIndex+'-creditorAgentIdentification'" class="form-control"
                            formControlName="creditorAgentIdentification" placeholder="Creditor agent identification">
                        </mat-form-field>
                        <h5>Remittance information</h5>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-payment-consent-remittanceInformationReference-'+internationalPaymentConsentFormIndex"
                            class="form-control" formControlName="remittanceInformationReference"
                            placeholder="Remittance information reference">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-payment-consent-remittanceInformationUnstructured-'+internationalPaymentConsentFormIndex"
                            class="form-control" formControlName="remittanceInformationUnstructured"
                            placeholder="Remittance information unstructured">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-payment-consent-instructionIdentification-'+internationalPaymentConsentFormIndex"
                            class="form-control" formControlName="instructionIdentification"
                            placeholder="Instruction identification">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-payment-consent-endToEndIdentification-'+internationalPaymentConsentFormIndex"
                            class="form-control" formControlName="endToEndIdentification"
                            placeholder="End to end identification">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-payment-consent-currencyOfTransfer-'+internationalPaymentConsentFormIndex"
                            class="form-control" formControlName="currencyOfTransfer"
                            placeholder="Currency Of Transfer">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text" [id]="'create-batch-international-payment-consent-rateType-'+internationalPaymentConsentFormIndex"
                            class="form-control" formControlName="rateType" placeholder="Rate Type">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-payment-consent-unitCurrency-'+internationalPaymentConsentFormIndex" class="form-control"
                            formControlName="unitCurrency" placeholder="Unit Currency">
                        </mat-form-field>
                        <mat-form-field>
                          <input matInput type="text" [id]="'create-batch-international-payment-consent-'+internationalPaymentConsentFormIndex+'-chargebearer'" class="form-control"
                            formControlName="chargeBearer" placeholder="ChargeBearer">
                        </mat-form-field>
                        <div>
                          <h5>Local Instrument</h5>
                          <mat-form-field class="example-full-width">
                            <input matInput type="text"
                              [id]="'create-batch-international-payment-consent-localInstrument-'+internationalPaymentConsentFormIndex"
                              class="form-control" formControlName="localInstrument" placeholder="Local Instrument">
                          </mat-form-field>
                        </div>
                        <div>
                          <h5>Debtor account</h5>
                          <mat-form-field class="example-full-width">
                            <input matInput type="text"
                              [id]="'create-batch-international-payment-consent-debtorAccountSchemeName-'+internationalPaymentConsentFormIndex"
                              class="form-control" formControlName="debtorAccountSchemeName"
                              placeholder="Debtor account scheme name">
                          </mat-form-field>
                          <mat-form-field class="example-full-width">
                            <input matInput type="text"
                              [id]="'create-batch-international-payment-consent-debtorAccountIdentification-'+internationalPaymentConsentFormIndex"
                              class="form-control" formControlName="debtorAccountIdentification"
                              placeholder="Debtor account identification">
                          </mat-form-field>
                          <mat-form-field class="example-full-width">
                            <input matInput type="text"
                              [id]="'create-batch-international-payment-consent-debtorAccountName-'+internationalPaymentConsentFormIndex"
                              class="form-control" formControlName="debtorAccountName"
                              placeholder="Debtor account name">
                          </mat-form-field>
                        </div>
                      </div>
                    </div>
                  </form>
                </mat-expansion-panel>
              </mat-accordion>
            </mat-expansion-panel>
          </mat-accordion>
          <mat-accordion>
            <mat-expansion-panel id="batch-international-payment-consent-add-international-scheduled-payments-accordion">
              <div class="add-batch-payment-div">
                <i class="material-icons blue bring-forward"
                  (click)="addInternationalScheduledPaymentToArray()">
                  add_box
                </i>
              </div>
              <mat-expansion-panel-header>
                <mat-panel-title>Add International Scheduled Payments</mat-panel-title>
              </mat-expansion-panel-header>
              <mat-accordion>
                <mat-expansion-panel
                  *ngFor="let internationalScheduledPayment of internationalScheduledPayments.controls; let internationalScheduledPaymentConsentFormIndex = index;"
                  [id]="'batch-international-payment-consent-international-scheduled-payment-'+internationalScheduledPaymentConsentFormIndex">
                  <mat-expansion-panel-header>
                    <mat-panel-title>{{internationalScheduledPaymentConsentFormIndex+1}}. International Scheduled Payment</mat-panel-title>
                    <mat-panel-description>
                      <i *ngIf="internationalScheduledPayments.controls.length>1"
                      class="material-icons blue mat-expansion-panel-header-description"
                        (click)="deleteInternationalScheduledPaymentFromArray(internationalScheduledPaymentConsentFormIndex)">
                        delete
                      </i>
                    </mat-panel-description>
                  </mat-expansion-panel-header>
                  <form [formGroup]="internationalScheduledPaymentForm">
                    <div formArrayName="internationalScheduledPayments">
                      <div [formGroupName]="internationalScheduledPaymentConsentFormIndex">
                        <h4>{{internationalScheduledPaymentConsentFormIndex+1}}. International Scheduled Payment</h4>
                        <h5>Instructed amount</h5>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-scheduled-payment-consent-amount-'+internationalScheduledPaymentConsentFormIndex" class="form-control"
                            formControlName="scheduledInstructedAmount" placeholder="Instructed amount">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-scheduled-payment-consent-currency-'+internationalScheduledPaymentConsentFormIndex"
                            class="form-control" formControlName="scheduledInstructedAmountCurrency"
                            placeholder="Instructed amount currency">
                        </mat-form-field>
                        <h5>Creditor account</h5>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-scheduled-payment-consent-creditorAccountIdentification-'+internationalScheduledPaymentConsentFormIndex"
                            class="form-control" formControlName="scheduledCreditorAccountIdentification"
                            placeholder="Creditor account identification">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-scheduled-payment-consent-name-'+internationalScheduledPaymentConsentFormIndex" class="form-control"
                            formControlName="scheduledCreditorAccountName" placeholder="Creditor account name">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-scheduled-payment-consent-scheduledSecondaryIdentification-'+internationalScheduledPaymentConsentFormIndex"
                            class="form-control" formControlName="scheduledSecondaryIdentification"
                            placeholder="Secondary Identification">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-scheduled-payment-consent-creditorAccountSchemeName-'+internationalScheduledPaymentConsentFormIndex"
                            class="form-control" formControlName="scheduledCreditorAccountSchemeName"
                            placeholder="Creditor account scheme name">
                        </mat-form-field>
                        <h5>Creditor</h5>
                        <mat-form-field>
                          <input matInput type="text" [id]="'create-batch-international-scheduled-payment-consent-'+internationalScheduledPaymentConsentFormIndex+'-creditorName'" class="form-control"
                            formControlName="scheduledCreditorName"
                            placeholder="Creditor name">
                        </mat-form-field>
                    <div class="create-payment">  
                      <h6>Creditor address line</h6>
                      <i class="material-icons blue bring-forward cursor-pointer" (click)="scheduledAddAddressLine(internationalScheduledPaymentConsentFormIndex)">
                            add_box
                      </i>
                    </div>
                        <div formGroupName="scheduledCreditorPostalAddress">
                          <div formArrayName="scheduledCreditorAddressLine">
                            <div *ngFor="let address of internationalScheduledPayments.controls[internationalScheduledPaymentConsentFormIndex].controls.scheduledCreditorPostalAddress.controls.scheduledCreditorAddressLine.controls; let scheduledCreditorAddressLineIndex = index;">
                              <mat-form-field class="example-full-width">
                                <input matInput
                                  type="text"
                                  [id]="'create-batch-international-scheduled-payment-consent-'+internationalScheduledPaymentConsentFormIndex+'-creditorAddressLine-'+scheduledCreditorAddressLineIndex"
                                  class="form-control"
                                  [formControlName]="scheduledCreditorAddressLineIndex"
                                  placeholder="Creditor address line">
                              </mat-form-field>
                            </div>
                          </div>
                        </div>
                      <h5>Creditor agent</h5>
                        <mat-form-field>
                          <input matInput type="text" [id]="'create-batch-international-scheduled-payment-consent-'+internationalScheduledPaymentConsentFormIndex+'-creditorAgentName'" class="form-control"
                            formControlName="scheduledCreditorAgentName" placeholder="Creditor agent name">
                        </mat-form-field>
                        <mat-form-field>
                          <input matInput type="text" [id]="'create-batch-international-scheduled-payment-consent-'+internationalScheduledPaymentConsentFormIndex+'-creditorAgentIdentification'" class="form-control"
                            formControlName="scheduledCreditorAgentIdentification" placeholder="Creditor agent identification">
                        </mat-form-field>
                        <h5>Remittance information</h5>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-scheduled-payment-consent-remittanceInformationReference-'+internationalScheduledPaymentConsentFormIndex"
                            class="form-control" formControlName="scheduledRemittanceInformationReference"
                            placeholder="Remittance information reference">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-scheduled-payment-consent-remittanceInformationUnstructured-'+internationalScheduledPaymentConsentFormIndex"
                            class="form-control" formControlName="scheduledRemittanceInformationUnstructured"
                            placeholder="Remittance information unstructured">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-scheduled-payment-consent-instructionIdentification-'+internationalScheduledPaymentConsentFormIndex"
                            class="form-control" formControlName="scheduledInstructionIdentification"
                            placeholder="Instruction identification">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-scheduled-payment-consent-requestedExecutionDateTime-'+internationalScheduledPaymentConsentFormIndex"
                            class="form-control" formControlName="scheduledRequestedExecutionDateTime"
                            placeholder="Requested Execution Date Time">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-scheduled-payment-consent-endToEndIdentification-'+internationalScheduledPaymentConsentFormIndex"
                            class="form-control" formControlName="scheduledEndToEndIdentification"
                            placeholder="End to end identification">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-scheduled-payment-consent-currencyOfTransfer-'+internationalScheduledPaymentConsentFormIndex"
                            class="form-control" formControlName="scheduledCurrencyOfTransfer"
                            placeholder="Currency Of Transfer">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-scheduled-payment-consent-rateType-'+internationalScheduledPaymentConsentFormIndex"
                            class="form-control" formControlName="scheduledRateType" placeholder="Rate Type">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-scheduled-payment-consent-unitCurrency-'+internationalScheduledPaymentConsentFormIndex"
                            class="form-control" formControlName="scheduledUnitCurrency" placeholder="Unit Currency">
                        </mat-form-field>
                        <mat-form-field>
                          <input matInput type="text" [id]="'create-batch-international-scheduled-payment-consent-'+internationalScheduledPaymentConsentFormIndex+'-chargebearer'" class="form-control"
                            formControlName="scheduledChargeBearer" placeholder="ChargeBearer">
                        </mat-form-field>
                        <div>
                          <h5>Local Instrument</h5>
                          <mat-form-field class="example-full-width">
                            <input matInput type="text"
                              [id]="'create-batch-international-payment-consent-scheduledLocalInstrument-'+internationalScheduledPaymentConsentFormIndex"
                              class="form-control" formControlName="scheduledLocalInstrument"
                              placeholder="Local Instrument">
                          </mat-form-field>
                        </div>
                        <div>
                          <h5>Debtor account</h5>
                          <mat-form-field class="example-full-width">
                            <input matInput type="text"
                              [id]="'create-batch-international-scheduled-payment-consent-debtorAccountSchemeName-'+internationalScheduledPaymentConsentFormIndex"
                              class="form-control" formControlName="scheduledDebtorAccountSchemeName"
                              placeholder="Debtor account scheme name">
                          </mat-form-field>
                          <mat-form-field class="example-full-width">
                            <input matInput type="text"
                              [id]="'create-batch-international-scheduled-payment-consent-debtorAccountIdentification-'+internationalScheduledPaymentConsentFormIndex"
                              class="form-control" formControlName="scheduledDebtorAccountIdentification"
                              placeholder="Debtor account identification">
                          </mat-form-field>
                          <mat-form-field class="example-full-width">
                            <input matInput type="text"
                              [id]="'create-batch-international-scheduled-payment-consent-debtorAccountName-'+internationalScheduledPaymentConsentFormIndex"
                              class="form-control" formControlName="scheduledDebtorAccountName"
                              placeholder="Debtor account name">
                          </mat-form-field>
                        </div>
                      </div>
                    </div>
                  </form>
                </mat-expansion-panel>
              </mat-accordion>
            </mat-expansion-panel>
          </mat-accordion>
          <div class="batch-create-button">
            <button id="create-batch-international-payment-consent" type="submit" (click)="createPaymentConsent()"
              mat-raised-button>{{'create' | uppercase}}</button>
          </div>
        </mat-expansion-panel>
      </mat-accordion>
      <mat-accordion>
        <mat-expansion-panel class="nested-accordion get" [expanded]="consent_id ? true :false" id="get-batch-international-payment-consent-accordion">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Get Batch International Payment Consent
            </mat-panel-title>
          </mat-expansion-panel-header>
          <div class="get-payment-header">
            <p class="get-payment-title">International Payment Consent by consent ID</p>
          </div>
          <div>
            <h6>Consent ID</h6>
            <mat-form-field class="example-full-width">
              <input id="batch-international-payment-consent-id" class="add-consent-id" matInput
                placeholder="Consent ID" value="{{consent_id}}" #consentId>
            </mat-form-field>
          </div>
          <button id="batch-international-payment-consent-get-data-button" name="get_data_by_consent_id" table_id="international-payment-consent-by-id-table" mat-raised-button
            class="header-button-right" [disabled]="consentId.value.length == 0"
            (click)="getPaymentConsent(consentId.value)">{{'Get
                          data' | uppercase}}</button>
          <mat-card-content>
            <div *ngIf="internationalPaymentConsentDataSource">
              <mat-table id="get-batch-international-payment-consent-account-by-id-table" #table
                [dataSource]="internationalPaymentConsentDataSource">
                <ng-container matColumnDef="status">
                  <mat-header-cell *matHeaderCellDef>Status </mat-header-cell>
                  <mat-cell id="get-batch-international-payment-consent-account-by-id-account-id"
                    *matCellDef="let element"> {{element.Status}}
                  </mat-cell>
                </ng-container>
                <ng-container matColumnDef="statusUpdateDateTime">
                  <mat-header-cell *matHeaderCellDef class="identification-table-cell"> StatusUpdateDateTime
                  </mat-header-cell>
                  <mat-cell id="get-batch-international-payment-consent-statusUpdateDateTime" *matCellDef="let element"
                    class="identification-table-cell">
                    {{element.StatusUpdateDateTime | date: 'yyyy-MM-dd'}} </mat-cell>
                </ng-container>
                <ng-container matColumnDef="creationDateTime">
                  <mat-header-cell *matHeaderCellDef> CreationDateTime </mat-header-cell>
                  <mat-cell id="get-batch-international-payment-consent-creationDateTime" *matCellDef="let element">
                    {{element.CreationDateTime | date: 'yyyy-MM-dd'}}
                  </mat-cell>
                </ng-container>
                <ng-container matColumnDef="arrow">
                  <mat-header-cell *matHeaderCellDef> Open data details </mat-header-cell>
                  <mat-cell *matCellDef="let element" class="arrow-center">
                    <button mat-icon-button (click)="openDataDetails(element)">
                      <i class="material-icons right">
                        arrow_forward_ios
                      </i>
                    </button>
                  </mat-cell>
                </ng-container>
                <mat-header-row *matHeaderRowDef="internationalPaymentConsentDisplayedColumns"></mat-header-row>
                <mat-row *matRowDef="let row; columns: internationalPaymentConsentDisplayedColumns;"></mat-row>
              </mat-table>
              <div *ngIf="isEmptyAccountsById" class="empty-result-text">No results.</div>
              <mat-paginator #batchInternationalPaymentConsentPaginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
            </div>
          </mat-card-content>
        </mat-expansion-panel>
      </mat-accordion>
    </mat-expansion-panel>
  </mat-accordion>
</mat-card>
<mat-card>
  <mat-accordion>
    <mat-expansion-panel id="batch-international-payment-accordion">
      <mat-expansion-panel-header>
        <mat-panel-title>
          Batch International Payment
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div *ngIf="batchInternationalPaymentId">
        <p>Payment ID:</p>
        <p>{{batchInternationalPaymentId}}</p>
      </div>
      <mat-accordion>
        <mat-expansion-panel class="nested-accordion create" id="create-batch-international-payment-accordion">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Create Batch International Payments
            </mat-panel-title>
          </mat-expansion-panel-header>
          <div>
            <h6>Consent ID</h6>
            <mat-form-field class="example-full-width" class="param-input">
              <input id="create-batch-international-payment-consent-id" class="add-consent-id" matInput
                placeholder="Consent ID" value="{{consent_id}}" #createdConsentId>
            </mat-form-field>
          </div>
          <mat-accordion>
            <mat-expansion-panel id="batch-international-payment-create-international-payments-accordion">
              <div class="add-batch-payment-div">
                <i class="material-icons blue bring-forward" (click)="addInternationalPaymentToArray()">
                  add_box
                </i>
              </div>
              <mat-expansion-panel-header>
                <mat-panel-title>Create International Payments</mat-panel-title>
              </mat-expansion-panel-header>
              <mat-accordion>
                <mat-expansion-panel
                  *ngFor="let internationalPayment of internationalPayments.controls; let internationalPaymentFormIndex = index;"
                  [id]="'batch-international-payment-international-payment-'+internationalPaymentFormIndex">
                  <mat-expansion-panel-header>
                    <mat-panel-title>{{internationalPaymentFormIndex+1}}. International Payment</mat-panel-title>
                    <mat-panel-description>
                      <i *ngIf="internationalPayments.controls.length>1"
                      class="material-icons blue mat-expansion-panel-header-description"
                        (click)="deleteInternationalPaymentFromArray(internationalPaymentFormIndex)">
                        delete
                      </i>
                    </mat-panel-description>
                  </mat-expansion-panel-header>
                  <form class="form-group" [formGroup]="internationalPaymentForm">
                    <div formArrayName="internationalPayments">
                      <div [formGroupName]="internationalPaymentFormIndex">
                        <h4>International Payment</h4>
                        <h5>Instructed amount</h5>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text" [id]="'create-batch-international-payment-amount-'+internationalPaymentFormIndex"
                            class="form-control" formControlName="instructedAmount" placeholder="Instructed amount">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text" [id]="'create-batch-international-payment-currency-'+internationalPaymentFormIndex"
                            class="form-control" formControlName="instructedAmountCurrency"
                            placeholder="Instructed amount currency">
                        </mat-form-field>
                        <h5>Creditor account</h5>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-payment-creditorAccountIdentification-'+internationalPaymentFormIndex"
                            class="form-control" formControlName="creditorAccountIdentification"
                            placeholder="Creditor account identification">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text" [id]="'create-batch-international-payment-name-'+internationalPaymentFormIndex"
                            class="form-control" formControlName="creditorAccountName"
                            placeholder="Creditor account name">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-payment-secondaryIdentification-'+internationalPaymentFormIndex" class="form-control"
                            formControlName="secondaryIdentification" placeholder="Secondary Identification">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-payment-creditorAccountSchemeName-'+internationalPaymentFormIndex"
                            class="form-control" formControlName="creditorAccountSchemeName"
                            placeholder="Creditor account scheme name">
                        </mat-form-field>
                        <h5>Creditor</h5>
                        <mat-form-field>
                          <input matInput type="text" [id]="'create-batch-international-payment-'+internationalPaymentFormIndex+'-creditorName'" class="form-control"
                            formControlName="creditorName"
                            placeholder="Creditor name">
                        </mat-form-field>
                    <div class="create-payment">  
                      <h6>Creditor address line</h6>
                      <i class="material-icons blue bring-forward cursor-pointer" (click)="addAddressLine(internationalPaymentFormIndex)">
                            add_box
                      </i>
                    </div>
                        <div formGroupName="creditorPostalAddress">
                          <div formArrayName="creditorAddressLine">
                            <div *ngFor="let address of internationalPayments.controls[internationalPaymentFormIndex].controls.creditorPostalAddress.controls.creditorAddressLine.controls; let creditorAddressLineIndex = index;">
                              <mat-form-field class="example-full-width">
                                <input matInput
                                  type="text"
                                  [id]="'create-batch-international-payment-'+internationalPaymentFormIndex+'-creditorAddressLine-'+creditorAddressLineIndex"
                                  class="form-control"
                                  [formControlName]="creditorAddressLineIndex"
                                  placeholder="Creditor address line">
                              </mat-form-field>
                            </div>
                          </div>
                        </div>
                      <h5>Creditor agent</h5>
                        <mat-form-field>
                          <input matInput type="text" [id]="'create-batch-international-payment-'+internationalPaymentFormIndex+'-creditorAgentName'" class="form-control"
                            formControlName="creditorAgentName" placeholder="Creditor agent name">
                        </mat-form-field>
                        <mat-form-field>
                          <input matInput type="text" [id]="'create-batch-international-payment-'+internationalPaymentFormIndex+'-creditorAgentIdentification'" class="form-control"
                            formControlName="creditorAgentIdentification" placeholder="Creditor agent identification">
                        </mat-form-field>
                        <h5>Remittance information</h5>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-payment-remittanceInformationReference-'+internationalPaymentFormIndex"
                            class="form-control" formControlName="remittanceInformationReference"
                            placeholder="Remittance information reference">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-payment-remittanceInformationUnstructured-'+internationalPaymentFormIndex"
                            class="form-control" formControlName="remittanceInformationUnstructured"
                            placeholder="Remittance information unstructured">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-payment-instructionIdentification-'+internationalPaymentFormIndex"
                            class="form-control" formControlName="instructionIdentification"
                            placeholder="Instruction identification">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-payment-endToEndIdentification-'+internationalPaymentFormIndex" class="form-control"
                            formControlName="endToEndIdentification" placeholder="End to end identification">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text" [id]="'create-batch-international-payment-currencyOfTransfer-'+internationalPaymentFormIndex"
                            class="form-control" formControlName="currencyOfTransfer"
                            placeholder="Currency Of Transfer">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text" [id]="'create-batch-international-payment-rateType-'+internationalPaymentFormIndex"
                            class="form-control" formControlName="rateType" placeholder="Rate Type">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text" [id]="'create-batch-international-payment-unitCurrency-'+internationalPaymentFormIndex"
                            class="form-control" formControlName="unitCurrency" placeholder="Unit Currency">
                        </mat-form-field>
                        <mat-form-field>
                          <input matInput type="text" [id]="'create-batch-international-payment-'+internationalPaymentFormIndex+'-chargebearer'" class="form-control"
                            formControlName="chargeBearer" placeholder="ChargeBearer">
                        </mat-form-field>
                        <div>
                          <h5>Local Instrument</h5>
                          <mat-form-field class="example-full-width">
                            <input matInput type="text" [id]="'create-international-payment-consent-localInstrument-'+internationalPaymentFormIndex"
                              class="form-control" formControlName="localInstrument" placeholder="Local Instrument">
                          </mat-form-field>
                        </div>
                        <div>
                          <h5>Debtor account</h5>
                          <mat-form-field class="example-full-width">
                            <input matInput type="text"
                              [id]="'create-batch-international-payment-debtorAccountSchemeName-'+internationalPaymentFormIndex"
                              class="form-control" formControlName="debtorAccountSchemeName"
                              placeholder="Debtor account scheme name">
                          </mat-form-field>
                          <mat-form-field class="example-full-width">
                            <input matInput type="text"
                              [id]="'create-batch-international-payment-debtorAccountIdentification-'+internationalPaymentFormIndex"
                              class="form-control" formControlName="debtorAccountIdentification"
                              placeholder="Debtor account identification">
                          </mat-form-field>
                          <mat-form-field class="example-full-width">
                            <input matInput type="text" [id]="'create-batch-international-payment-debtorAccountName-'+internationalPaymentFormIndex"
                              class="form-control" formControlName="debtorAccountName"
                              placeholder="Debtor account name">
                          </mat-form-field>
                        </div>
                      </div>
                    </div>
                  </form>
                </mat-expansion-panel>
              </mat-accordion>
            </mat-expansion-panel>
          </mat-accordion>
          <mat-accordion>
            <mat-expansion-panel id="batch-international-payment-create-international-scheduled-payments-accordion">
              <div class="add-batch-payment-div">
                <i class="material-icons blue bring-forward"
                  (click)="addInternationalScheduledPaymentToArray()">
                  add_box
                </i>
              </div>
              <mat-expansion-panel-header>
                <mat-panel-title>Create International Scheduled Payments</mat-panel-title>
              </mat-expansion-panel-header>
              <mat-accordion>
                <mat-expansion-panel
                  *ngFor="let internationalScheduledPayment of internationalScheduledPayments.controls; let internationalScheduledPaymentFormIndex = index;"
                  [id]="'batch-international-payment-international-scheduled-payment-'+internationalScheduledPaymentFormIndex">
                  <mat-expansion-panel-header>
                    <mat-panel-title>{{internationalScheduledPaymentFormIndex+1}}. International Scheduled Payment</mat-panel-title>
                    <mat-panel-description>
                      <i *ngIf="internationalScheduledPayments.controls.length>1"
                      class="material-icons blue mat-expansion-panel-header-description"
                        (click)="deleteInternationalScheduledPaymentFromArray(internationalScheduledPaymentFormIndex)">
                        delete
                      </i>
                    </mat-panel-description>
                  </mat-expansion-panel-header>
                  <form class="form-group" [formGroup]="internationalScheduledPaymentForm">
                    <div formArrayName="internationalScheduledPayments">
                      <div [formGroupName]="internationalScheduledPaymentFormIndex">
                        <h4>{{internationalScheduledPaymentFormIndex+1}}. International Scheduled Payment</h4>
                        <h5>Instructed amount</h5>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text" [id]="'create-batch-international-scheduled-payment-amount-'+internationalScheduledPaymentFormIndex"
                            class="form-control" formControlName="scheduledInstructedAmount"
                            placeholder="Instructed amount">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text" [id]="'create-batch-international-scheduled-payment-currency-'+internationalScheduledPaymentFormIndex"
                            class="form-control" formControlName="scheduledInstructedAmountCurrency"
                            placeholder="Instructed amount currency">
                        </mat-form-field>
                        <h5>Creditor account</h5>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-scheduled-payment-creditorAccountIdentification-'+internationalScheduledPaymentFormIndex"
                            class="form-control" formControlName="scheduledCreditorAccountIdentification"
                            placeholder="Creditor account identification">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text" [id]="'create-batch-international-scheduled-payment-name-'+internationalScheduledPaymentFormIndex"
                            class="form-control" formControlName="scheduledCreditorAccountName"
                            placeholder="Creditor account name">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-scheduled-payment-scheduledSecondaryIdentification-'+internationalScheduledPaymentFormIndex"
                            class="form-control" formControlName="scheduledSecondaryIdentification"
                            placeholder="Secondary Identification">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-scheduled-payment-creditorAccountSchemeName-'+internationalScheduledPaymentFormIndex"
                            class="form-control" formControlName="scheduledCreditorAccountSchemeName"
                            placeholder="Creditor account scheme name">
                        </mat-form-field>
                        <h5>Creditor</h5>
                        <mat-form-field>
                          <input matInput type="text" [id]="'create-batch-international-scheduled-payment-'+internationalScheduledPaymentFormIndex+'-creditorName'" class="form-control"
                            formControlName="scheduledCreditorName"
                            placeholder="Creditor name">
                        </mat-form-field>
                    <div class="create-payment">  
                      <h6>Creditor address line</h6>
                      <i class="material-icons blue bring-forward cursor-pointer" (click)="scheduledAddAddressLine(internationalScheduledPaymentFormIndex)">
                            add_box
                      </i>
                    </div>
                        <div formGroupName="scheduledCreditorPostalAddress">
                          <div formArrayName="scheduledCreditorAddressLine">
                            <div *ngFor="let address of internationalScheduledPayments.controls[internationalScheduledPaymentFormIndex].controls.scheduledCreditorPostalAddress.controls.scheduledCreditorAddressLine.controls; let scheduledCreditorAddressLineIndex = index;">
                              <mat-form-field class="example-full-width">
                                <input matInput
                                  type="text"
                                  [id]="'create-batch-international-scheduled-payment-'+internationalScheduledPaymentFormIndex+'-creditorAddressLine-'+scheduledCreditorAddressLineIndex"
                                  class="form-control"
                                  [formControlName]="scheduledCreditorAddressLineIndex"
                                  placeholder="Creditor address line">
                              </mat-form-field>
                            </div>
                          </div>
                        </div>
                      <h5>Creditor agent</h5>
                        <mat-form-field>
                          <input matInput type="text" [id]="'create-batch-international-scheduled-payment-'+internationalScheduledPaymentFormIndex+'-creditorAgentName'" class="form-control"
                            formControlName="scheduledCreditorAgentName" placeholder="Creditor agent name">
                        </mat-form-field>
                        <mat-form-field>
                          <input matInput type="text" [id]="'create-batch-international-scheduled-payment-'+internationalScheduledPaymentFormIndex+'-creditorAgentIdentification'" class="form-control"
                            formControlName="scheduledCreditorAgentIdentification" placeholder="Creditor agent identification">
                        </mat-form-field>
                        <h5>Remittance information</h5>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-scheduled-payment-remittanceInformationReference-'+internationalScheduledPaymentFormIndex"
                            class="form-control" formControlName="scheduledRemittanceInformationReference"
                            placeholder="Remittance information reference">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-scheduled-payment-remittanceInformationUnstructured-'+internationalScheduledPaymentFormIndex"
                            class="form-control" formControlName="scheduledRemittanceInformationUnstructured"
                            placeholder="Remittance information unstructured">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-scheduled-payment-instructionIdentification-'+internationalScheduledPaymentFormIndex"
                            class="form-control" formControlName="scheduledInstructionIdentification"
                            placeholder="Instruction identification">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-scheduled-payment-requestedExecutionDateTime-'+internationalScheduledPaymentFormIndex"
                            class="form-control" formControlName="scheduledRequestedExecutionDateTime"
                            placeholder="Requested Execution Date Time">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-scheduled-payment-endToEndIdentification-'+internationalScheduledPaymentFormIndex"
                            class="form-control" formControlName="scheduledEndToEndIdentification"
                            placeholder="End to end identification">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-scheduled-payment-currencyOfTransfer-'+internationalScheduledPaymentFormIndex"
                            class="form-control" formControlName="scheduledCurrencyOfTransfer"
                            placeholder="Currency Of Transfer">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-scheduled-payment-rateType-'+internationalScheduledPaymentFormIndex"
                            class="form-control" formControlName="scheduledRateType" placeholder="Rate Type">
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <input matInput type="text"
                            [id]="'create-batch-international-scheduled-payment-unitCurrency-'+internationalScheduledPaymentFormIndex"
                            class="form-control" formControlName="scheduledUnitCurrency" placeholder="Unit Currency">
                        </mat-form-field>
                        <mat-form-field>
                          <input matInput type="text" [id]="'create-batch-international-scheduled-payment-'+internationalScheduledPaymentFormIndex+'-chargebearer'" class="form-control"
                            formControlName="scheduledChargeBearer" placeholder="ChargeBearer">
                        </mat-form-field>
                        <div>
                          <h5>Local Instrument</h5>
                          <mat-form-field class="example-full-width">
                            <input matInput type="text"
                              [id]="'create-international-payment-scheduledLocalInstrument-'+internationalScheduledPaymentFormIndex"
                              class="form-control" formControlName="scheduledLocalInstrument"
                              placeholder="Local Instrument">
                          </mat-form-field>
                        </div>
                        <div>
                          <h5>Debtor account</h5>
                          <mat-form-field class="example-full-width">
                            <input matInput type="text"
                              [id]="'create-batch-international-scheduled-payment-debtorAccountSchemeName-'+internationalScheduledPaymentFormIndex"
                              class="form-control" formControlName="scheduledDebtorAccountSchemeName"
                              placeholder="Debtor account scheme name">
                          </mat-form-field>
                          <mat-form-field class="example-full-width">
                            <input matInput type="text"
                              [id]="'create-batch-international-scheduled-payment-debtorAccountIdentification-'+internationalScheduledPaymentFormIndex"
                              class="form-control" formControlName="scheduledDebtorAccountIdentification"
                              placeholder="Debtor account identification">
                          </mat-form-field>
                          <mat-form-field class="example-full-width">
                            <input matInput type="text"
                              [id]="'create-batch-international-scheduled-payment-debtorAccountName-'+internationalScheduledPaymentFormIndex"
                              class="form-control" formControlName="scheduledDebtorAccountName"
                              placeholder="Debtor account name">
                          </mat-form-field>
                        </div>
                      </div>
                    </div>
                  </form>
                </mat-expansion-panel>
              </mat-accordion>
            </mat-expansion-panel>
          </mat-accordion>
          <div class="create-payment create-payment-buttons batch-create-button">
            <button id="batch-international-payment-create-button" [disabled]="createdConsentId.value.length == 0" type="submit"
              (click)="createPayment(createdConsentId.value)" mat-raised-button>{{'create' | uppercase}}</button>
            <div *ngIf="batchInternationalPaymentId" class="batch-created-successfully">Successful payment creation
            </div>
          </div>
        </mat-expansion-panel>
      </mat-accordion>
      <mat-accordion>
        <mat-expansion-panel class="nested-accordion get" [expanded]="batchInternationalPaymentId ? true :false"  id="get-batch-international-payment-accordion">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Get Batch International Payment
            </mat-panel-title>
          </mat-expansion-panel-header>
          <div class="get-payment-header">
            <p class="get-payment-title">International Payment by payment ID</p>
          </div>
          <mat-form-field class="example-full-width">
            <input id="get-batch-international-payment-payment-id" class="add-consent-id" matInput
              placeholder="Payment ID" value="{{batchInternationalPaymentId}}" #paymentId>
          </mat-form-field>
          <button id="batch-international-payment-get-data-button" name="get_data_by_consent_id" table_id="international-payment-consent-by-id-table" mat-raised-button
            class="header-button-right" [disabled]="paymentId.value.length == 0" (click)="getPayment(paymentId.value)">{{'Get
                            data' | uppercase}}</button>
          <mat-card-content>
            <div *ngIf="internationalPaymentDataSource">
              <mat-table id="get-batch-international-payment-account-by-id-table" #table
                [dataSource]="internationalPaymentDataSource">
                <ng-container matColumnDef="status">
                  <mat-header-cell *matHeaderCellDef>Status </mat-header-cell>
                  <mat-cell id="get-batch-international-payment-account-by-id-account-id" *matCellDef="let element">
                    {{element.Status}}
                  </mat-cell>
                </ng-container>
                <ng-container matColumnDef="statusUpdateDateTime">
                  <mat-header-cell *matHeaderCellDef class="identification-table-cell"> StatusUpdateDateTime
                  </mat-header-cell>
                  <mat-cell id="get-batch-international-payment-statusUpdateDateTime" *matCellDef="let element"
                    class="identification-table-cell">
                    {{element.StatusUpdateDateTime | date: 'yyyy-MM-dd'}} </mat-cell>
                </ng-container>
                <ng-container matColumnDef="creationDateTime">
                  <mat-header-cell *matHeaderCellDef> CreationDateTime </mat-header-cell>
                  <mat-cell id="get-batch-international-payment-creationDateTime" *matCellDef="let element">
                    {{element.CreationDateTime | date: 'yyyy-MM-dd'}}
                  </mat-cell>
                </ng-container>
                <ng-container matColumnDef="arrow">
                  <mat-header-cell *matHeaderCellDef> Open data details </mat-header-cell>
                  <mat-cell *matCellDef="let element" class="arrow-center">
                    <button mat-icon-button (click)="openDataDetails(element)">
                      <i class="material-icons right">
                        arrow_forward_ios
                      </i>
                    </button>
                  </mat-cell>
                </ng-container>
                <mat-header-row *matHeaderRowDef="internationalPaymentDisplayedColumns"></mat-header-row>
                <mat-row *matRowDef="let row; columns: internationalPaymentDisplayedColumns;"></mat-row>
              </mat-table>
              <div *ngIf="isEmptyPayment" class="empty-result-text">No results.</div>
              <mat-paginator #batchInternationalPaymentPaginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
            </div>
          </mat-card-content>
        </mat-expansion-panel>
      </mat-accordion>
    </mat-expansion-panel>
  </mat-accordion>
</mat-card>